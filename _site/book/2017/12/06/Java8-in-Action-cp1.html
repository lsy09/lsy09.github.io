<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta content="CHAPTER 1. 자바 8을 눈여겨봐야 하는 이유" name="description"> <meta name="keywords" content="Java,Java8"> <meta name="author" content="Lee Suyoun"> <meta name="baseurl" content=""> <title> Youn's|Java8 in Action : CHAPTER1 </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20171204.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20171204.min.js"></script> <script src="/static/assets/blog-20171204.min.js"></script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src="/static/assets/img/search/cb-close.png" id="close-btn"/> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src="/static/assets/img/search/cb-search.png" id="search-btn" title="Double click Ctrl"/> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Youn's</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href="blog/"></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/java/">Java</a></li> <li> <a class="page-scroll" href="/web/">Web</a></li> <li> <a class="page-scroll" href="/database/">Database</a></li> <li> <a class="page-scroll" href="/book/">Book</a></li> </ul> </div> </div> </nav> </div> <div id="inSlider" class="carousel carousel-fade" data-ride="carousel"> <ol class="carousel-indicators"> <li data-target="#inSlider" data-slide-to="0" class="active"></li> <li data-target="#inSlider" data-slide-to="1"></li> </ol> <div class="carousel-inner" role="listbox"> <div class="item active"> <div class="container"> <div class="carousel-caption"> </div> <div class="carousel-image wow zoomIn"> <!-- <img src="static/img/landing/laptop.png" alt="laptop"/> --> </div> </div> <!-- Set background for slide in css --> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_one.jpg);" title="first banner image"> </div> </div> <div class="item"> <div class="container"> <div class="carousel-caption"> </div> <div class="carousel-image wow zoomIn"> <!-- <img src="static/img/landing/laptop.png" alt="laptop"/> --> </div> </div> <!-- Set background for slide in css --> <div class="header-back" style="background-image: url(/static/assets/img/landing/header_two.jpg);" title="second banner image"></div> </div> </div> <a class="left carousel-control" href="#inSlider" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a> <a class="right carousel-control" href="#inSlider" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Next</span> </a> </div> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <a class="btn btn-white btn-xs" href="/book">Book</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 6 Dec 2017</span> <h1> Java8 in Action : CHAPTER1 </h1> </div> <h2 id="chapter-1-자바-8을-눈여겨봐야-하는-이유">CHAPTER 1. 자바 8을 눈여겨봐야 하는 이유</h2> <ul> <li>자바 8이 등장하기 이전에는 나머지 코어를 활용하려면 스레드를 사용, 하지만 스레드를 사용하변 관리하기 어렵고 많은 문제가 발생할수 있다는 단점</li> <li>데이터베이스 질의 언어에서 표현식을 처리하는 것처럼 병렬 연산을 지원하는 스트림이라는 새로운 API를 제공</li> <li><strong>메서드에 코드를 전달하는 간결 기법</strong><sup>메서드 레퍼런스와 람다</sup>, 인터페이스의 <strong>디폴트 메서드</strong>가 추가</li> <li>자바 8 기법은 <strong>함수형 프로그래밍<sup>functional-style programming</sup></strong> 에서 위력 발휘</li> </ul> <h3 id="11-왜-아직도-자바는-변화하는가">1.1 왜 아직도 자바는 변화하는가?</h3> <ul> <li>새로운 언어가 등장하면서 진화하지 않은 기존언어는 사장</li> <li>자바는 지난 15년간 경쟁 언어를 대신하며 커다란 생태계를 성공적으로 구축</li> </ul> <blockquote> <p>프로그래밍 언어 생태계에서의 자바의 위치</p> </blockquote> <ul> <li>처음부터 많은 유용한 라이브러리를 포함하는 잘 설계된 객체지향 언어로 시작</li> <li>스레드와 락을 이용한 소소한 동시성도 지원</li> <li>코드를 JVM 바이트코드로 컴파일 하는 특징 때문에 자바는 인터넷 애플릿 프로그램의 주요 언어가 됨</li> </ul> <blockquote> <p>스트림 처리(stream processing)</p> </blockquote> <ul> <li>첫 번째 프로그래밍 개념 <ul> <li><strong>스트림</strong> 한번에 한개씩 만들어지는 연속적인 데이터 항목들의 모임</li> </ul> </li> <li>입력 스트림에서 데이터를 한개씩 읽어 들이며 마찬가지로 출력 스트림으로 데이터를 한 개씩 기록</li> <li>고수준으로 추상화 하여 일련의 스트림으로 만들어 처리 할 수 있음</li> <li>스레드라는 복잡한 작업을 사용하지 않으면서도 <strong>공짜</strong>로 병렬성을 얻을 수 있음</li> </ul> <blockquote> <p>동작 파라미터화로 메서드에 코드 전달하기</p> </blockquote> <ul> <li>두 번째 프로그래밍 개념 <ul> <li>코드 일부를 API로 전달하는 기능</li> </ul> </li> <li>메서드를 다른 메서드의 인수로 넘겨주는 기능을 제공 이러한 기능을 이론적으로 <strong>동작 파라미터화<sup>behavior parameterization</sup></strong> 라고 부름</li> </ul> <blockquote> <p>병렬성과 공유 가변 데이터</p> </blockquote> <ul> <li>세 번째 프로그래밍 개념 <ul> <li>‘병렬성을 공짜로 얻을 수 있다’라는 말에서 시작</li> </ul> </li> <li>스트림 메서드로 전달하는 코드는 다른 코드와 동시에 실행하더라도 <strong>안전하게 실행</strong>될 수 있어야 함</li> <li>다른 코드와 동시에 실행하더라도 안전하게 실행할 수 있는 코드를 만들려면 공유된 가변 데이터(shared mutable data)에 접근 하지 않아야 함</li> <li>스트림을 이용하면 기존의 자바 스레드 API보다 쉽게 병렬성을 활용 할 수 있음</li> <li>공유되지 않은 가변 데이터<sup>no shared mutable data</sup>, 메서드와 함수 코드를 다른 메서드로 전달하는 두가지 기능은 <strong>함수형 프로그래밍</strong> 패러다임의 핵심적인 사항 임</li> </ul> <blockquote> <p>자바가 진화해야 하는 이유</p> </blockquote> <ul> <li>전통적인 객체지향 프로그래밍과 함수형 프로그래밍은 완전 상극, 자바 8에서 함수형 프로그래밍을 도입함으로써 두 가지 프로그래밍 패러다임의 장점을 모두 활용 할수 있게 됨</li> </ul> <hr /> <h3 id="12-자바-함수">1.2 자바 함수</h3> <ul> <li>함수(function)라는 용어는 <strong>메서드(method)</strong>, 특히 정적 메서드<sup>static method</sup>와 같은 의미로 사용</li> <li><strong>수학적인 함수</strong>처럼 사용되며 부작용을 일이키지 않는 함수를 의미</li> <li>프로그래밍 언어의 핵심은 값을 바꾸는것 프로그래밍 언어에서는 이 값을 일급<sup>first-class:퍼스트클래스</sup>값 이라고 함</li> <li>자유롭게 전달할 수 없는 구조체는 이급 시민이라고 하며 메서드, 클래스 등은 이급 자바 시민에 해당</li> </ul> <blockquote> <p>메서드와 람다를 일급 시민으로</p> </blockquote> <h5 id="메서드-레퍼런스method-reference">메서드 레퍼런스(method reference)</h5> <ul> <li>디렉터리에서 모든 숨겨진 파일을 필터링 한다고 가정, 주어진 파일이 숨겨져 있는지 여부를 알려주는 메서드를 구현</li> </ul> <p><code class="highlighter-rouge">이전 자바 : FileFilter 객체로 isHidden 메서드를 감산 다음에 File.listFiles 메서드로 전달 해야 했음.</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">File</span><span class="o">[]</span> <span class="n">hiddenFiles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"."</span><span class="o">).</span><span class="na">listFiles</span><span class="o">(</span><span class="k">new</span>  <span class="n">FileFilter</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">bollean</span> <span class="nf">accept</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">isHidden</span><span class="o">();</span> <span class="o">----&gt;</span> <span class="err">숨겨진</span> <span class="err">파일</span> <span class="err">필터링</span><span class="o">!</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div> <p><code class="highlighter-rouge">자바 8 : 메서드레퍼런스 :: 문법을 이용해서 직접 isHidden함수를 lisstFiles 메서드로 전달 할수 있음.</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">File</span><span class="o">[]</span> <span class="n">hiddenFiles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"."</span><span class="o">).</span><span class="na">listFiles</span><span class="o">(</span><span class="nl">File:</span><span class="o">:</span><span class="n">isHidden</span><span class="o">);</span>
</code></pre></div></div> <ul> <li>File 클래스에 이미 isHidden이라는 함수는 준비되어있으므로 자바8의 메서드 레퍼런스<sup>method reference</sup> <strong>::</strong> (‘이 메서드를 값으로 사용하라’는 의미) 를 이용해서 listFiles에 직접 전달 가능</li> <li>자바 8에서는 더 이상 메서드가 이급값이 아닌 일급값</li> <li>메서드가 아닌 <strong>함수</strong>라는 용어를 사용했다는 사실 주목</li> </ul> <blockquote> <p>람다: 익명함수 - 기명(named)메서드를 일급값으로 취급할 뿐 아니라 <strong>람다</strong>(또는 익명 함수anonymous function)를 포함하여 <strong>함수도 값</strong>으로 취급 람다 문법형식으로 구현된 프로그램을 함수형 프로그래밍 즉 ‘함수를 일급 값으로 넘겨주는 프로그램을 구현한다’라고 함</p> </blockquote> <ul> <li>코드 넘겨주기: 예제</li> </ul> <p><code class="highlighter-rouge">이전 자바</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="nf">filterGreenApples</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">inventory</span><span class="o">){</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>  <span class="o">&lt;--</span><span class="err">반환되는</span> <span class="n">result</span><span class="err">는</span> <span class="n">List</span><span class="err">로</span> <span class="err">처음에는</span> <span class="err">비어</span> <span class="err">있지만</span> <span class="err">점점</span> <span class="err">녹색</span> <span class="err">사과로</span> <span class="err">채워진다</span><span class="o">.</span>
  <span class="k">for</span><span class="o">(</span><span class="n">Apple</span> <span class="n">apple</span> <span class="o">:</span> <span class="n">inventory</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="s">"green"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">apple</span><span class="o">.</span><span class="na">getColor</span><span class="o">())){</span>   <span class="o">&lt;--</span> <span class="err">녹색사과만</span> <span class="err">선택</span>
        <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">apple</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="nf">filterHeavyApples</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">inventory</span><span class="o">){</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>  
  <span class="k">for</span><span class="o">(</span><span class="n">Apple</span> <span class="n">apple</span> <span class="o">:</span> <span class="n">inventory</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">apple</span><span class="o">.</span><span class="na">getWeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="o">){</span>   <span class="o">&lt;--</span> <span class="mi">150</span><span class="err">이상의</span> <span class="err">무거운</span> <span class="err">애플만</span> <span class="err">선택</span>
        <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">apple</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><code class="highlighter-rouge">자바 8 :: 코드를 인수로 넘겨줄 수 있으므로 filter 메서드를 중복으로 구현할 필요 없음.</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isGreenApple</span><span class="o">(</span><span class="n">Apple</span> <span class="n">apple</span><span class="o">){</span>
    <span class="k">return</span> <span class="s">"green"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">apple</span><span class="o">.</span><span class="na">getColor</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isHeavyApple</span><span class="o">(</span><span class="n">Apple</span> <span class="n">apple</span><span class="o">){</span>
    <span class="k">return</span> <span class="n">apple</span><span class="o">.</span><span class="na">getWeight</span><span class="o">()&gt;</span><span class="mi">150</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;{</span> <span class="o">&lt;--</span> <span class="err">보통</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">function</span><span class="err">에서</span> <span class="kn">import</span>
    <span class="nn">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="n">T</span> <span class="n">t</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="nf">filterApples</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">inventory</span><span class="o">,</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">p</span><span class="o">){</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Apple</span> <span class="n">apple</span> <span class="o">:</span> <span class="n">inventory</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">apple</span><span class="o">)){</span>
            <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">apple</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><code class="highlighter-rouge">다음처럼 메서드 호출</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filterApples</span><span class="o">(</span><span class="n">inventory</span><span class="o">,</span> <span class="nl">Apple:</span><span class="o">:</span><span class="n">isGreenApple</span><span class="o">);</span>
</code></pre></div></div> <p><code class="highlighter-rouge">또는, 다음과 같은 호출</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filterApples</span><span class="o">(</span><span class="n">inventory</span><span class="o">,</span> <span class="nl">Apple:</span><span class="o">:</span><span class="n">isHeavyApple</span><span class="o">);</span>
</code></pre></div></div> <blockquote> <p>메서드 전달에서 람다로</p> </blockquote> <ul> <li>람다가 몇줄 이상으로 길어진다면(즉, 조금 복잡한 동작을 수행하는 상황) 익명 람다보다는 코드가 수행하는 일을 잘 설명하는 이름을 가진 메서드를 정의하고 메서드 레퍼런스를 활용하는것이 바람직.</li> <li>자바8 에서는 filter와 비슷한 동작을 수행하는 연산집합을 포함하는 새로운 스트림 API(컬렉션Collection 과 비슷하며 함수형 프로그래머에게 더 익숙한 API)를 제공.</li> <li>컬렉션과 스트림 간에 변환할 수 있는 메서드(map, reduce 등)도 제공.</li> </ul> <hr /> <h3 id="13-스트림">1.3 스트림</h3> <ul> <li>자바 애플리케이션은 컬렉션을 만들고 활용 함.</li> <li>고가의 트랜잭션<sup>Transaction</sup>만 필터링한 다음에 통화로 결과를 그룹화 해야 한다고 가정.</li> </ul> <p><code class="highlighter-rouge">이전 자바 : 기본코드</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Map</span><span class="o">&lt;</span><span class="n">Currency</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Transaction</span><span class="o">&gt;&gt;</span> <span class="n">transactionByCurrencies</span> <span class="o">=</span>
<span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>        <span class="o">&lt;--</span> <span class="err">그룹화된</span> <span class="err">트랜잭션을</span> <span class="err">더할</span> <span class="n">Map</span><span class="err">생성</span>
<span class="k">for</span><span class="o">(</span><span class="n">Transaction</span> <span class="n">transaction</span> <span class="o">:</span> <span class="n">transactions</span><span class="o">){</span>        <span class="o">&lt;--</span> <span class="err">트랜잭션의</span> <span class="err">리스트를</span> <span class="err">반복</span>
    <span class="k">if</span><span class="o">(</span><span class="n">transaction</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="o">){</span>              <span class="o">&lt;--</span> <span class="err">고가의</span> <span class="err">트랜잭션을</span> <span class="err">필터링</span>
        <span class="n">Currency</span> <span class="n">currency</span> <span class="o">=</span> <span class="n">transaction</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">();</span>      <span class="o">&lt;--</span> <span class="err">트랜잭션의</span> <span class="err">통화</span> <span class="err">추출</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Transaction</span><span class="o">&gt;</span> <span class="n">transactionsForCurrency</span> <span class="o">=</span>    
            <span class="n">transactionByCurrencies</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currency</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">transactionsForCurrency</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>        <span class="o">&lt;--</span> <span class="err">현재</span> <span class="err">통화의</span> <span class="err">그룹화된</span> <span class="err">맵에</span> <span class="err">항목이</span> <span class="err">없으면</span> <span class="err">새로</span> <span class="err">만듬</span>
            <span class="n">transactionForCurrency</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
            <span class="n">transactionsByCurrencies</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">currency</span><span class="o">,</span> <span class="n">transactionsForCurrency</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">transactionsForCurrency</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">transaction</span><span class="o">);</span>    <span class="o">&lt;--</span> <span class="err">현재</span> <span class="err">탐색된</span> <span class="err">트랜잭션을</span> <span class="err">같은</span> <span class="err">통화의</span> <span class="err">트랜잭션</span> <span class="err">리스트에</span> <span class="err">추가</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><code class="highlighter-rouge">자바 8 : 스트림 API 이용</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Map</span><span class="o">&lt;</span><span class="n">Currency</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Transaction</span><span class="o">&gt;&gt;</span> <span class="n">transactionByCurrencies</span> <span class="o">=</span>
    <span class="n">transactions</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">((</span><span class="n">Transaction</span> <span class="n">t</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="o">)</span>     <span class="o">&lt;--</span> <span class="err">고가의</span> <span class="err">트랜잭션</span> <span class="err">필터링</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="nl">Transaction:</span><span class="o">:</span><span class="n">getCurrency</span><span class="o">));</span>     <span class="o">&lt;--</span> <span class="err">통화로</span> <span class="err">그룹화함</span>
</code></pre></div></div> <ul> <li>스트림 API를 이용하면 컬렉션 API와는 상당히 다른 방식으로 데이터를 처리할 수 있다는 사실 기억.</li> <li>컬렉션에서는 직접 처리 이런 방식의 반복을 <strong>외부반복<sup>external iteration</sup></strong>.</li> <li>스트림API를 이용하면 루프를 신경쓸 필요 없고 라이브러리 내부에서 모든데이터가 처리됨, 이런 방식의 반복을 <strong>내부반복<sup>internal iteration</sup></strong>.</li> </ul> <blockquote> <p>멀티스레딩은 어렵다<code class="highlighter-rouge">이전 자바</code> - 멀티스레딩 환경에서 각각의 스레드는 동시에 공유된 데이터에 접근, 데이터 갱신. - 멀티스레딩 모델은 순차적인 모델보다 다루기가 어려움.</p> </blockquote> <p><code class="highlighter-rouge">자바 8</code> - 스트림API(java.util.stream)로 ‘컬렉션을 처리하면서 발생하는 모호함과 반복적인 코드 문제’ 그리고 ‘멀티코어 활용 어려움’이라는 두 가지 문제를 모두 해결.</p> <hr /> <h3 id="14-디폴트-메서드">1.4 디폴트 메서드</h3> <ul> <li>라이브러리 설계자가 더 쉽게 변화할 수 잇는 인터페이스를 만들 수 있도록 디폴트 메서드 추가.</li> <li>특정 프로그램을 구현하는데 도움을 주는 기능이 아니라 미래에 프로그램이 쉽게 변화할 수 있는 환경을 제공하는 기능.</li> </ul> <p><code class="highlighter-rouge">이전 자바</code> - List<T>(List가 구현하는 인터페이스인 Collection<T>도 마찬가지)가 stream 이나 parallelStream 메서드를 지원하지 않는다는 것이 문제</T></T></p> <p><code class="highlighter-rouge">자바 8</code> - 구현 클래스에서 구현하지 않아도 되는 메서드를 인터페이스가 포함할 수 있는 기능도 제공. - 메서드 바디는 클래스 구현이 아니라 인터페이스의 일부로 포함. - 기존의 코드를 건드리지 않고도 원래의 인터페이스 설계를 자유롭게 확장, 인터페이스 규격명세서에 default라는 새로운 키워드를 지원.</p> <hr /> <h3 id="15-함수형-프로그램에서-가져온-다른-유용한-아이디어">1.5 함수형 프로그램에서 가져온 다른 유용한 아이디어</h3> <p><code class="highlighter-rouge">자바 8</code> - NullPointer 예외를 피할 수 있도록 도와주는 Optional<T> 클래스 제공. - Optional<T>는 값을 갖거나 갖지 않을 수 있는 컨테어너 객체이며, Optional<T>는 값이 없는 상황을 어떻게 처리할지 명시적으로 구현하는 메서드를 포함. - Optional<T>를 사용하면 NullPointer 예외를 피할 수 있음.</T></T></T></T></p> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">Java</button> <button class="btn btn-white btn-xs" type="button">Java8</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> <i class="fa fa-comments-o"> </i> <span class="disqus-comment-count" data-disqus-url="http://localhost:4000/book/2017/12/06/Java8-in-Action-cp1.html">0</span> comments </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <!--<a class="a2a_button_wechat"></a>--> <!--<a class="a2a_button_sina_weibo"></a>--> <!--<a class="a2a_button_pocket"></a>--> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ /* var disqus_config = function () { this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function() { var d = document, s = d.createElement('script'); s.src = '//Yons's.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> <script id="dsq-count-scr" src="https://Yons's.disqus.com/count.js" async></script> </body> </html>
