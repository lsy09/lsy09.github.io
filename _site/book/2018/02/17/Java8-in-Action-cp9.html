<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta content="CHAPTER 9. 디폴트 메서드" name="description"> <meta name="keywords" content="Java,Java8"> <meta name="author" content="Lee Suyoun"> <meta name="baseurl" content=""> <title> Youn's|Java8 in Action : CHAPTER_09 </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20171204.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20171204.min.js"></script> <script src="/static/assets/blog-20171204.min.js"></script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src="/static/assets/img/search/cb-close.png" id="close-btn"/> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src="/static/assets/img/search/cb-search.png" id="search-btn" title="Double click Ctrl"/> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Youn's</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href="blog/"></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/java/">Java</a></li> <li> <a class="page-scroll" href="/web/">Web</a></li> <li> <a class="page-scroll" href="/database/">Database</a></li> <li> <a class="page-scroll" href="/book/">Book</a></li> <li> <a class="page-scroll" href="/etc/">Etc</a></li> </ul> </div> </div> </nav> </div> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <a class="btn btn-white btn-xs" href="/book">Book</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 17 Feb 2018</span> <h1> Java8 in Action : CHAPTER_09 </h1> </div> <h2 id="chapter-9-디폴트-메서드">CHAPTER 9. 디폴트 메서드</h2> <ul> <li> <p>자바8 API에도 List 인터페이스에 sort 같은 메서드를 추가했으므로 문제가 발생 할수 있음</p> </li> <li> <p>기본 구현을 포함하는 인터페이스를 정의하는 두가지 방법 제공</p> <ul> <li>인터페이스 내부에 <strong>정적 메서드</strong><sup>static method</sup>를 사용하는 것</li> <li>인터페이스의 기본 구현을 제공할 수 있도록 <strong>디폴트 메서드</strong><sup>default method</sup>라는 기능을 사용하는 것</li> </ul> </li> <li> <p>메서드 구현을 포함하는 인터페이스를 정의 할수 있음, 결과적으로 기존 인터페이스를 구현하는 클래스는 자동으로 인터페이스에 추가된 새로운 메서드의 디폴트 메서드를 상속 받게 됨</p> </li> </ul> <blockquote> <p>List 인터페이스의 sort</p> </blockquote> <ul> <li>List 인터페이스의 sort 메서드는 자바8에서 새로 추가된 메서드</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">default</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="n">Compatator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">){</span>
    <span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">c</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li>default 키워드는 해당 메서드가 디폴트 메서드임을 가르키며, sort 메서드는 Collections.sort 메서드를 호출</li> </ul> <blockquote> <p>Collection 인터페이스의 stream</p> </blockquote> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">default</span> <span class="n">Stream</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">stream</span><span class="o">(){</span>
    <span class="k">return</span> <span class="n">StreamSupport</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">spliterator</span><span class="o">(),</span> <span class="kc">false</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li>stream 메서드는 내부적으로 StreamSupport.stream이라는 메서드를 호출해서 스트림을 반환</li> <li>stream 메서드의 내부에서는 Collection 인터페이스의 다른 디폴트 메서드 spliterator도 호출</li> </ul> <blockquote> <p>바이너리 호환성, 소스 호환성, 동작 호환성</p> </blockquote> <ul> <li>바이너리 호환성 : 뭔가를 바꾼 이후에도 에러 없이 기존 바이너리가 실행될 수 있는 상황을 <strong>바이너리 호환성</strong>이라고 함 (바이너리 실행에는 인증<sup>verification</sup>, 준비<sup>preparation</sup>, 해석<sup>resolution</sup>등의 과정이 포함)</li> <li>소스 호환성 : 코드를 고쳐도 기존 프로그램을 성공적으로 재컴파일할 수 있음을 의미</li> <li>동작 호환성 : 코드를 바꾼 다음에도 같은 입력값이 주어지면 프로그램이 같은 동작을 실행한다는 의미</li> </ul> <blockquote> <p>디폴트 메서드란?</p> </blockquote> <ul> <li>호환성을 유지하면서 API를 바꿀 수 있도록 새로운 기능인 <strong>디폴트 메서드</strong><sup>default method</sup>를 제공</li> <li>default 라는 키워드로 시작하며 다른 클래스에 선언된 메서드처럼 메서드 바디를 포함</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Sized</span><span class="o">{</span>
    <span class="kt">int</span> <span class="nf">size</span><span class="o">();</span>
    <span class="k">default</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">(){</span>      <span class="o">&lt;--</span><span class="err">디폴트</span> <span class="err">메서드</span>
        <span class="k">return</span> <span class="nf">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li>Sized 인터페이스를 구현하는 모든 클래스는 isEmpty의 구현도 상속 받음 즉, 인터페이스에 디폴트 메서드를 추가하면 소스 호환성이 유지 됨</li> <li>Predicate, Function, Comparator 등 많은 함수형 인터페이스도 Predicate.and 또는 Function.andThen 같은 다양한 디폴트 메서드를 포함</li> </ul> <blockquote> <p>추상 클래스 와 자바8 의 인터페이스</p> </blockquote> <ol> <li>클래스는 하나의 추상 클래스만 상속, 인터페이스 여러개 구현</li> <li>추상클래스는 인스턴스 변수(필드)로 공통 상태를 가짐, 하지만 인터페이스는 인스턴스 변수를 가질 수 없음</li> </ol> <blockquote> <p>선택형 메서드</p> </blockquote> <ul> <li>Iterator는 hasNext와 next뿐 아니라 remove메서드도 정의</li> <li>remove 기능은 잘 사용하지 않으므로 자바8 이전에는 remove 기능을 무시</li> <li>결과적으로 Iterator 를 구현하는 많은 클래스에서는 remove에 빈 구현을 제공</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">Iterator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">();</span>
    <span class="n">T</span> <span class="nf">next</span><span class="o">();</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">(){</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnsupportedOperationException</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li>위와 같이 자바8 의 Iterator 인터페이스에서 remove메서드를 기본 구현의 제공되므로 Iterator 인터페이스를 구현하는 클래스는 빈 remove 메서드를 구현 할 필요가 없어졌고, 붎필요한 코드를 줄일 수 있음</li> </ul> <blockquote> <p>동작 다중 상속</p> </blockquote> <ul> <li>디폴트 메서드를 이용하면 기존에는 불가능 했던 <strong>동작 다중 상속</strong> 기능도 구현</li> <li>자바에서 클래스는 한 개의 다른 클래스만 상속, 인터페이스는 여러 개 구현</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">AbstractList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>             <span class="o">&lt;--</span> <span class="err">한</span> <span class="err">개의</span> <span class="err">클래스를</span> <span class="err">상속</span> <span class="err">받음</span>
         <span class="kd">implements</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;,</span> <span class="n">RandomAccess</span><span class="o">,</span> <span class="n">Cloneable</span><span class="o">,</span>
            <span class="n">Serializable</span><span class="o">,</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;{</span>         <span class="o">&lt;--</span> <span class="err">여섯</span> <span class="err">개의</span> <span class="err">인터페이스를</span> <span class="err">구현</span>
    
<span class="o">}</span>
</code></pre></div></div> <blockquote> <p>다중 상속 형식</p> </blockquote> <ul> <li>ArrayList는 한 개의 클래스를 상속 받고, 여섯 개의 인터페이스를 구현</li> <li>ArrayList는 AbstractList, List, RandomAccess, Cloneable, Serializable, Iterable, Collection 의 <strong>서브형식</strong><sup>subtype</sup> 이 되며, 디폴트 메서드를 사용하지 않아도 다중 상속을 활용 할수 있음</li> <li>인터페이스가 구현을 포함, 클래스는 여러 인터페이스에서 동작(구현 코드) 상속</li> </ul> <blockquote> <p>해결 규칙</p> </blockquote> <ul> <li>다른 클래스나 인터페이스로 부터 같은 시그너처를 갖는 메서드를 상속받을 때는 세 가지 규칙을 따라야 함</li> </ul> <ol> <li>클래스가 항상 이김, 클래스나 슈퍼클래스에서 정의한 메서드가 디폹트 메서드 보다 우선권을 가짐</li> <li>1번 규칙 이외의 상황에서는 서브인터페이스가 이김, 상속관계를 갖는 인터페이스에서 같은 시그너처를 갖는 메서드를 정의할 때는 서브인터페이스가 이김. 즉, B가 A를 상속 받는다면 B가 A를 이김</li> <li>여전히 디폴트 메서드의 우선순의가 결정되지 않았다면 여러 인터페이스를 상속받는 클래스가 명시적으로 디폴트 메서드를 오버라이드 하고 호출 해야함</li> </ol> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">Java</button> <button class="btn btn-white btn-xs" type="button">Java8</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> <i class="fa fa-comments-o"> </i> <span class="disqus-comment-count" data-disqus-url="http://localhost:4000/book/2018/02/17/Java8-in-Action-cp9.html">0</span> comments </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <!--<a class="a2a_button_wechat"></a>--> <!--<a class="a2a_button_sina_weibo"></a>--> <!--<a class="a2a_button_pocket"></a>--> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ /* var disqus_config = function () { this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function() { var d = document, s = d.createElement('script'); s.src = '//Yons's.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> <script id="dsq-count-scr" src="https://Yons's.disqus.com/count.js" async></script> </body> </html>
