<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta content="11. CompletableFuture: 조합할 수 있는 비동기 프로그래밍" name="description"> <meta name="keywords" content="Java,Java8"> <meta name="author" content="Lee Suyoun"> <meta name="baseurl" content=""> <title> Youn's|Java8 in Action : CHAPTER_11 </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20171204.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <!-- Main Scripts --> <script src="/static/assets/app-20171204.min.js"></script> <script src="/static/assets/blog-20171204.min.js"></script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src="/static/assets/img/search/cb-close.png" id="close-btn"/> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src="/static/assets/img/search/cb-search.png" id="search-btn" title="Double click Ctrl"/> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Youn's</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href="blog/"></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/java/">Java</a></li> <li> <a class="page-scroll" href="/web/">Web</a></li> <li> <a class="page-scroll" href="/database/">Database</a></li> <li> <a class="page-scroll" href="/book/">Book</a></li> <li> <a class="page-scroll" href="/etc/">Etc</a></li> </ul> </div> </div> </nav> </div> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <a class="btn btn-white btn-xs" href="/book">Book</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 21 Feb 2018</span> <h1> Java8 in Action : CHAPTER_11 </h1> </div> <h2 id="chapter-11-completablefuture-조합할-수-있는-비동기-프로그래밍">CHAPTER 11. CompletableFuture: 조합할 수 있는 비동기 프로그래밍</h2> <blockquote> <p>Future</p> </blockquote> <ul> <li>자바5 부터 미래의 어느 시점에 결과를 얻는 모델에 활용할 수 있도록 Future 인터페이스를 제공</li> <li>비동기 계산을 모델링하는 데 Future를 이용할 수 있으며, Future는 계산이 끝났을 때 결과에 접근할 수 있는 레퍼런스를 제공</li> <li>저수준의 스레드에 비해 직관적으로 이해하기 쉽다는 장점 있음, Future를 이용하려면 시간이 오래 걸리는 작업을 Callable 객체 내부로 감싼뒤 ExecutorService에 제출 해야 함</li> </ul> <p><code class="highlighter-rouge">자바8 이전</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ExecutorService</span> <span class="n">executor</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newCachedThreadPool</span><span class="o">();</span>     <span class="o">&lt;--</span> <span class="err">스레드</span> <span class="err">풀에</span> <span class="err">태스크를</span> <span class="err">제출하려면</span> <span class="n">ExecutorService</span><span class="err">를</span> <span class="err">만들어야</span> <span class="err">함</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;(){</span>     <span class="o">&lt;--</span> <span class="n">Callable</span><span class="err">을</span> <span class="n">ExecutorService</span><span class="err">로</span> <span class="err">제출</span>
   <span class="kd">public</span> <span class="n">Double</span> <span class="nf">call</span><span class="o">(){</span>
       <span class="k">return</span> <span class="nf">doSomeLongComputation</span><span class="o">();</span>      <span class="o">&lt;--</span> <span class="err">시간이</span> <span class="err">오래</span> <span class="err">걸리는</span> <span class="err">작업은</span> <span class="err">다른</span> <span class="err">스레드에서</span> <span class="err">비동기적으로</span> <span class="err">실행</span>
   <span class="o">}</span> 
<span class="o">});</span>
<span class="n">doSomethingElse</span><span class="o">();</span>      <span class="o">&lt;--</span> <span class="err">비동기</span> <span class="err">작업을</span> <span class="err">수행하는</span> <span class="err">동안</span> <span class="err">다른작업을</span> <span class="err">수행</span>
<span class="k">try</span><span class="o">{</span>
    <span class="n">Double</span> <span class="n">result</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span>    <span class="o">&lt;--</span> <span class="err">비동기</span> <span class="err">작업의</span> <span class="err">결과를</span> <span class="err">가져옴</span><span class="o">,</span> <span class="err">결과가</span> <span class="err">준비되어</span> <span class="err">있지</span> <span class="err">않으면</span> <span class="err">호츨</span> <span class="err">스레드가</span> <span class="err">블록</span><span class="o">,</span> 
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ExecutionException</span> <span class="n">ee</span><span class="o">){</span>                            <span class="err">하지만</span> <span class="err">최대</span> <span class="mi">1</span><span class="err">초까지만</span> <span class="err">기다림</span>
    <span class="c1">// 계산 중 예외 발생</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">ie</span><span class="o">){</span>
    <span class="c1">// 현재 스레드에서 대기 중 인터럽트 발생</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">TimeoutException</span> <span class="n">te</span><span class="o">){</span>
    <span class="c1">// Future가 완료되기 전에 타임아웃 발생</span>
<span class="o">}</span>
</code></pre></div></div> <blockquote> <p>Future 제한</p> </blockquote> <ul> <li>자바8에서 새로 제공하는 CompletableFuture 클래스(Future 인터페이스를 구현한 클래)</li> <li>Stream과 CompletableFuture는 비슷한 패턴, 즉 람다 표현식과 파이프라이닝을 활용</li> <li>Future와 CompletableFuture의 관계를 Collection과 Stream의 관계에 비유할 수 있음</li> </ul> <blockquote> <p>동기 API와 비동기 API</p> </blockquote> <ul> <li>동기 API <ul> <li>메서드를 호출한 다음에 메서드가 계산을 완료할 때 까지 기다렸다가 메서드가 반환되면 호출자는 반환된 값으로 계속 다른 동작을 수행</li> <li>동기 API를 사용하는 상황을 <strong>블록호출</strong><sup>blocking call</sup>이라고 함</li> </ul> </li> <li>비동기 API <ul> <li>메서드가 즉시 반환되며 끝내지 못한 나머지 작업을 호출자 스레드와 동기적으로 실행될 수 있도록 다른 스레드에 할당</li> <li>비동기 API를 사용하는 상황을 <strong>비블록 호출</strong><sup>non-blocking call</sup>이라고 함</li> <li>주로 I/O 시스템 프로그래밍에서 이와 같은 방식으로 동작을 수행</li> <li>계산 동작을 수행하는 동안 비동기적으로 디스크 접근을 수행, 더 이상 수행할 동작이 없으면 디스크 블록이 메모리로 로딩될 때 까지 기다림</li> </ul> </li> </ul> <blockquote> <p>동기 메서드를 비동기 메서드로 변환</p> </blockquote> <ul> <li>자바5 부터 비동기 계산의 결과를 표현할 수 있는 java.util.concurrent.Future 인터페이스를 제공(즉, 호출자 스레드가 블록되지 않고 다른 작업을 실행)</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">Future</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">getPrice</span><span class="o">(</span><span class="n">String</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">futurePrice</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CompletableFuture</span><span class="o">&lt;&gt;();</span>      <span class="o">&lt;--</span> <span class="err">계산</span> <span class="err">결과를</span> <span class="err">포함할</span> <span class="n">CompletableFuture</span><span class="err">를</span> <span class="err">생성</span>
    <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="kt">double</span> <span class="n">price</span> <span class="o">=</span> <span class="n">calculatePrice</span><span class="o">(</span><span class="n">product</span><span class="o">);</span>     <span class="o">&lt;--</span> <span class="err">다른</span> <span class="err">스레드에서</span> <span class="err">비동기적으로</span> <span class="err">계산을</span> <span class="err">수행</span>
                    <span class="n">futurePrice</span><span class="o">.</span><span class="na">complete</span><span class="o">(</span><span class="n">price</span><span class="o">);</span>        <span class="o">&lt;--</span> <span class="err">오랜</span> <span class="err">시간이</span> <span class="err">걸리는</span> <span class="err">계산이</span> <span class="err">완료되면</span> <span class="n">Future</span><span class="err">에</span> <span class="err">값을</span> <span class="err">설정</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">futurePrice</span><span class="o">.</span><span class="na">completeExceptionally</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
                <span class="o">}</span>
    <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">futurePrice</span><span class="o">;</span>     <span class="o">&lt;--</span> <span class="err">계산</span> <span class="err">결과가</span> <span class="err">완료되길</span> <span class="err">기다리지</span> <span class="err">않고</span> <span class="n">Future</span><span class="err">를</span> <span class="err">반환</span>
<span class="o">}</span>
</code></pre></div></div> <ul> <li>Future가 값을 가지고 있다면 Future에 포함된 값을 ㅇ릭거나 값이 계산될 때까지 블록</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shop</span> <span class="n">shop</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Shop</span><span class="o">(</span><span class="s">"BestShop"</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">nanoTime</span><span class="o">();</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">futurePrice</span> <span class="o">=</span> <span class="n">shop</span><span class="o">.</span><span class="na">getPriceAsync</span><span class="o">(</span><span class="s">"my favorite product"</span><span class="o">);</span>     <span class="o">&lt;--</span> <span class="err">상점에</span> <span class="err">제품가격</span> <span class="err">정보</span> <span class="err">요청</span>
<span class="kt">long</span> <span class="n">invocationTime</span> <span class="o">=</span> <span class="o">((</span><span class="n">System</span><span class="o">.</span><span class="na">nanoTime</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">)</span> <span class="o">/</span> <span class="mi">1_000_000</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Invocation returned after "</span> <span class="o">+</span> <span class="n">invocationTime</span> 
                                                <span class="o">+</span> <span class="s">" msecs"</span><span class="o">);</span>
<span class="c1">// 제품의 가격을 계산하는 동안</span>
<span class="c1">// 다른 상점 검색 등 다른 작업 수행</span>
<span class="n">doSomethingElse</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">price</span> <span class="o">=</span> <span class="n">futurePrice</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>                   <span class="o">&lt;--</span> <span class="err">가격정보가</span> <span class="err">있으면</span> <span class="n">Future</span><span class="err">에서</span> <span class="err">가격</span> <span class="err">정보를</span> <span class="err">읽고</span><span class="o">,</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"Price is %.2f%n"</span><span class="o">,</span> <span class="n">price</span><span class="o">);</span>            <span class="err">가격정보가</span> <span class="err">없으면</span> <span class="err">가격</span> <span class="err">정보를</span> <span class="err">받을</span> <span class="err">때까지</span> <span class="err">블록</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ExecutionException</span> <span class="o">|</span> <span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span>
<span class="kt">long</span> <span class="n">retrievalTime</span> <span class="o">=</span> <span class="o">((</span><span class="n">System</span><span class="o">.</span><span class="na">nanoTime</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">)</span> <span class="o">/</span> <span class="mi">1_000_000</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Price returned after "</span> <span class="o">+</span> <span class="n">retrievalTime</span> <span class="o">+</span> <span class="s">" msecs"</span><span class="o">);</span>
</code></pre></div></div> <blockquote> <p>에러 처리 방법</p> </blockquote> <ul> <li>예외가 발생하면 해당 스레드에만 영향을 줌 즉, 에러가 발생해도 가격 계산을 계속 진행되며 일의 순서가 꼬임</li> <li>클라이언트는 get 메서드가 반환될 때까지 영원히 기다리게 될 수도 있음</li> <li>블록문제가 발생할 수 있는 상황에서는 타임아웃을 활용하는 것이 좋음</li> <li>에러 발생원인을 알수 있는 방법으로는 completeExceptionally 메서드를 이요해서 CompletableFuture 내부 발생한 예외를 클라이언트로 전달 해야함</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">Future</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">getPriceAsync</span><span class="o">(</span><span class="n">String</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">futurePrice</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CompletableFuture</span><span class="o">&lt;&gt;();</span>
    <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="kt">double</span> <span class="n">price</span> <span class="o">=</span> <span class="n">calculatePrice</span><span class="o">(</span><span class="n">product</span><span class="o">);</span>
                    <span class="n">futurePrice</span><span class="o">.</span><span class="na">complete</span><span class="o">(</span><span class="n">price</span><span class="o">);</span>    <span class="o">&lt;--</span> <span class="err">계산이</span> <span class="err">정상적으로</span> <span class="err">종료되면</span> <span class="n">Future</span><span class="err">에</span> <span class="err">가격</span> <span class="err">정보를</span> <span class="err">저장한</span> <span class="err">채로</span> <span class="n">Future</span><span class="err">를</span> <span class="err">종료</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">futurePrice</span><span class="o">.</span><span class="na">completeExceptionally</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span> <span class="o">&lt;--</span> <span class="err">도중에</span> <span class="err">문제가</span> <span class="err">발생하면</span> <span class="err">발생한</span> <span class="err">에러를</span> <span class="err">포함시켜</span> <span class="n">Future</span><span class="err">를</span> <span class="err">종</span>
                <span class="o">}</span>
    <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">futurePrice</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <blockquote> <p>팩토리 메서드 supplyAsync로 CompletableFuture 만들기</p> </blockquote> <ul> <li>팩토리 메서드 supplyAsync를 사용하여 간단하게 한행으로 구현 가능</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">Future</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="nf">getPrice</span><span class="o">(</span><span class="n">String</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">CompletableFuture</span><span class="o">.</span><span class="na">supplyAsync</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">calculatePrice</span><span class="o">(</span><span class="n">product</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div> <blockquote> <p>병렬 스트림으로 요청 병렬화</p> </blockquote> <ul> <li>병렬 스트림을 이용해서 순차 계산을 병렬로 처리해서 성능을 개선</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">findPrices</span><span class="o">(</span><span class="n">String</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">shops</span><span class="o">.</span><span class="na">parallelStream</span><span class="o">()</span>   <span class="o">&lt;--</span> <span class="err">병렬</span> <span class="err">스트림으로</span> <span class="err">데이터를</span> <span class="err">병렬로</span> <span class="err">요청</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">shop</span> <span class="o">-&gt;</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s price is %.2f"</span><span class="o">,</span> <span class="n">shop</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span> <span class="n">shop</span><span class="o">.</span><span class="na">getPrice</span><span class="o">(</span><span class="n">product</span><span class="o">)))</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">toList</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div> <blockquote> <p>CompletableFuture로 비동기 호충 구현</p> </blockquote> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">findPricesFuture</span><span class="o">(</span><span class="n">String</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">priceFutures</span> <span class="o">=</span>
            <span class="n">shops</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">shop</span> <span class="o">-&gt;</span> <span class="n">CompletableFuture</span><span class="o">.</span><span class="na">supplyAsync</span><span class="o">(</span>     <span class="o">&lt;--</span> <span class="n">CompletableFuture</span><span class="err">로</span> <span class="err">각각의</span> <span class="err">가격을</span> <span class="err">비동기적으로</span> <span class="err">계</span>
                    <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">shop</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" price is "</span>
                    <span class="o">+</span> <span class="n">shop</span><span class="o">.</span><span class="na">getPrice</span><span class="o">(</span><span class="n">product</span><span class="o">),</span> <span class="n">executor</span><span class="o">))</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">prices</span> <span class="o">=</span> <span class="n">priceFutures</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">CompletableFuture:</span><span class="o">:</span><span class="n">join</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    
    <span class="k">return</span> <span class="n">priceFutures</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">CompletableFuture:</span><span class="o">:</span><span class="n">join</span><span class="o">)</span>   <span class="o">&lt;--</span> <span class="err">모든</span> <span class="err">비동기</span> <span class="err">동작이</span> <span class="err">끝나길</span> <span class="err">기다림</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">Java</button> <button class="btn btn-white btn-xs" type="button">Java8</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> <i class="fa fa-comments-o"> </i> <span class="disqus-comment-count" data-disqus-url="http://localhost:4000/book/2018/02/21/Java8-in-Action-cp11.html">0</span> comments </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <!--<a class="a2a_button_wechat"></a>--> <!--<a class="a2a_button_sina_weibo"></a>--> <!--<a class="a2a_button_pocket"></a>--> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ /* var disqus_config = function () { this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function() { var d = document, s = d.createElement('script'); s.src = '//Yons's.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> <script id="dsq-count-scr" src="https://Yons's.disqus.com/count.js" async></script> </body> </html>
